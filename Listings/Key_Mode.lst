C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE KEY_MODE
OBJECT MODULE PLACED IN .\Objects\Key_Mode.obj
COMPILER INVOKED BY: D:\ProgramFiles\Keil_v5\C51\BIN\C51.EXE App_User\Source\Key_Mode.c OPTIMIZE(8,SPEED) BROWSE INCDIR(
                    -.\Device;.\App_User\Include) DEBUG OBJECTEXTEND PRINT(.\Listings\Key_Mode.lst) OBJECT(.\Objects\Key_Mode.obj)

line level    source

   1          /*******************/
   2          /*Í·ÎÄ¼þheader file*/
   3          /*******************/
   4          #include "app_main.h"
*** WARNING C329 IN LINE 16 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 17 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 20 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 21 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 24 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 25 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 28 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 29 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 32 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 33 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 36 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 37 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 40 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 41 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 44 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 45 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 48 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 49 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 52 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 53 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 56 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 57 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 60 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 61 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 64 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 2   

*** WARNING C329 IN LINE 65 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 68 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 69 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 72 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 73 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 76 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 77 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 80 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 81 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 84 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 85 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 88 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 89 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 92 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 93 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 96 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 97 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 100 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 101 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 104 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 105 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 108 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 109 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 112 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 113 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 116 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 117 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 120 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 121 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7¡¢GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
   5          
   6          /************************/
   7          /*ºê¶¨Òåmacro definition*/
   8          /************************/
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 3   

   9          
  10          /*************************/
  11          /*ÀàÐÍ¶¨Òåbyte definition*/
  12          /*************************/
  13          FLAG_KEYSET_TypeDef  FlagKSet_TypeDef;//°´¼üµÄ¹¦ÄÜÉèÖÃ±êÖ¾
  14          TIME_TEMP_TypeDef    Time_Temp_TypeDef;//ÉèÖÃÊ±¼äÊ±²Å°ÑÉèÖÃµÄÊ±¼äÏÈ¸¶¸øÕâ¸ö£¬È»ºóÈ·ÈÏÁËÔÙ¸³Öµµ½gRTC_xx;
  15          
  16          /****************************/
  17          /*±êÖ¾Î»¶¨Òåflags definetion*/
  18          /****************************/
  19          
  20          /*****************************/
  21          /*±äÁ¿¶¨Òåvariable definition*/
  22          /*****************************/
  23          uint8_t  gbKeyPress;//°´¼ü°´ÏÂ
  24          uint8_t  gbKeyNone; //Ã»ÓÐ°´¼ü°´ÏÂ
  25          uint8_t  KeyValue;  //°´¼üÖµ
  26          uint8_t  KeyEvent;  //°´¼üÊÂ¼þ
  27          uint8_t  cntKeyLoop;//¼ÆÊý°´¼üÑ­»·£¬¶Ì°´£¬³¤°´£¬³¬³¤°´µÄ°´ÏÂÊ±¼ä
  28          uint8_t  cntKeylong;
  29          uint8_t  KeyCurValueBK;//ÏÖÔÚ°´¼ü±¸·Ý
  30          uint8_t  KeyCurValue;//°´¼üÏÖÔÚÖµ
  31          uint8_t  KeyLastValue;//°´¼üÉÏÒ»´ÎµÄÖµ
  32          /**************************/
  33          /*Êý×é¶¨Òåarray definition*/
  34          /**************************/
  35          
  36          /******************************/
  37          /*º¯ÊýÉùÃ÷Function declaration*/
  38          /******************************/
  39          
  40          /*****************************/
  41          /*º¯Êý¶¨Òåfunction definetion*/
  42          /*****************************/
  43          /*******************************************************************************
  44           * º¯ÊýÔ­ÐÍ£º
  45           * ÊäÈë²ÎÊý£º
  46           * Êä³ö²ÎÊý£º
  47           * º¯Êý¹¦ÄÜ£º
  48           * ·µ»ØÖµËµÃ÷£º
  49           * ´´½¨ÈÕÆÚ£º
  50           * ´´½¨ÈË£º
  51           * ÐÞ¸ÄÈÕÆÚ
  52           * ÐÞ¸ÄÈË£º
  53           * µÚN´ÎÐÞ¸Ä£º
  54           * ÐÞ¸ÄÔ­Òò£º
  55           * ±¸×¢£º"P1=0x2F(0010_1111)"ÏÈ¸³Öµ¸øP1¿Ú£¬P15Îª1£¬P14Îª0£¬ÊäÈë¶Ë(P10-P13)Îª1£¬
  56           * È»ºóÔÙ¶ÁP1¿ÚµçÆ½(P1&0x0F)£¬²¢°Ñ¸ßËÄÎ»¶¼Çå0£¬¼ÙÈçÕâÊ±ºòP10±»°´ÏÂ£¬ÄÇ¶Áµ½µÄP1
  57           * ¿ÚµçÆ½Îª(P1&0x0f)Îª0x0E(0000_1110),È»ºóÓë0x0F(0000_1111)Òì»òµÃµ½0x01(0000_0001),
  58           * 
  59           *******************************************************************************/
  60          uint8_t  Matrix_Buttons(void)
  61          {
  62   1              uint8_t  readData1,readData2;
  63   1              uint8_t  keyValue;
  64   1              keyValue=0;//Èç¹ûÃ»ÓÐ°´¼ü°´ÏÂ¾ÍÊÇ·µ»Ø0
  65   1               
  66   1              /*******************************************************************************
  67   1              *¹¦ÄÜ£º"P1=0x2F(0010_1111)"ÏÈ¸³Öµ¸øP1¿Ú£¬P15Îª1£¬P14Îª0£¬ÊäÈë¶Ë(P10-P13)Îª1£¬È»
  68   1              * ºóÔÙ¶ÁP1¿ÚµçÆ½(P1&0x0F)£¬²¢°Ñ¸ßËÄÎ»¶¼Çå0(P1&0x0F£¬¼ÙÈçÕâÊ±ºòP10±»°´ÏÂ£¬ÄÇ¶Áµ½
  69   1              * µÄP1¿ÚµçÆ½Îª0x0E(0000_1110),È»ºóÓë0x0F(0000_1111)Òì»òµÃµ½0x01(0000_0001),
  70   1              * readData1µÄ·¶Î§Îª1¡¢2¡¢4¡¢8£¬keyValueµÄ·¶Î§Îª1~9,9ÊÇ×éºÏ¼ü¡£
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 4   

  71   1              *******************************************************************************/
  72   1              P1=0x2F;                        
  73   1              readData1=(P1&0x0F)^0x0F;
  74   1              switch(readData1)
  75   1              {
  76   2                      case 1:
  77   2                              keyValue=1; //K_SNOOZE_DIMMER
  78   2                              break;
  79   2                      case 2:
  80   2                              keyValue=2; //VOL+
  81   2                              break;
  82   2                      case 4:
  83   2                              keyValue=3; //K_PLAY_PAUSE
  84   2                              break;
  85   2                      case 8:
  86   2                              keyValue=4; //NEXT
  87   2                              break;
  88   2                      default:
  89   2                              break;
  90   2              }
  91   1              /*******************************************************************************
  92   1              *¹¦ÄÜ£º"P1=0x1F(0001_1111)"ÏÈ¸³Öµ¸øP1¿Ú£¬P15Îª0£¬P14Îª1£¬ÊäÈë¶Ë(P10-P13)Îª1£¬È»
  93   1              * ºóÔÙ¶ÁP1¿ÚµçÆ½(P1&0x0F)£¬²¢°Ñ¸ßËÄÎ»¶¼Çå0(P1&0x0F£¬¼ÙÈçÕâÊ±ºòP11±»°´ÏÂ£¬ÄÇ¶Áµ½
  94   1              * µÄP1¿ÚµçÆ½Îª0x0D(0000_1101),È»ºóÓë0x0F(0000_1111)Òì»òµÃµ½0x02(0000_0010),
  95   1              * readData2µÄ·¶Î§Îª1¡¢2¡¢4¡¢8£¬keyValueµÄ·¶Î§Îª1~9£¬9ÊÇ×éºÏ¼ü¡£
  96   1              *******************************************************************************/
  97   1              P1=0x1F;
  98   1              readData2=(P1&0x0F)^0x0F;
  99   1              switch(readData2)
 100   1              {
 101   2                      case 1:
 102   2                              keyValue=5; //ALARM
 103   2                              if (keyValue == 1)//Îª1ËµÃ÷¸Õ²Åalarm¼ü±»°´ÏÂ£¬ÒòÎªÃ¿´Îµ÷ÓÃÕâ¸öº¯Êý¶¼»á³õÊ¼»¯
 104   2                              {                                 //keyValue£¬ËùÒÔ²»»áÊÇÉÏ´Îµ÷ÓÃº¯ÊýÁôÏÂµÄÖµ
 105   3                                      keyValue = 9;  //K_AL_SNOOZE
 106   3                              }
 107   2                              else if (keyValue == 1)
 108   2                                      keyValue = 10; //K_AL_VOLINC,
 109   2                              break;
 110   2                      case 2:
 111   2                              keyValue=6; //VOL-
 112   2                              break;
 113   2                      case 4:
 114   2                              keyValue=7; //BT
 115   2                              break;
 116   2                      case 8:
 117   2                              keyValue=8; //PREV
 118   2                              break;
 119   2                      case 0x0C:
 120   2                              keyValue = 11; //K_AL_VOLDEC,
 121   2                      default:
 122   2                              break;
 123   2              }
 124   1               
 125   1              return keyValue;
 126   1      }
 127          
 128          /*******************************************************************************
 129           * º¯ÊýÔ­ÐÍ£º
 130           * ÊäÈë²ÎÊý£º
 131           * Êä³ö²ÎÊý£º
 132           * º¯Êý¹¦ÄÜ£º
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 5   

 133           * ·µ»ØÖµËµÃ÷£º
 134           * ´´½¨ÈÕÆÚ£º
 135           * ´´½¨ÈË£º
 136           * ÐÞ¸ÄÈÕÆÚ
 137           * ÐÞ¸ÄÈË£º
 138           * µÚN´ÎÐÞ¸Ä£º
 139           * ÐÞ¸ÄÔ­Òò£º
 140           * ±¸×¢£º
 141           *******************************************************************************/
 142          uint8_t GetKeyValue(void) 
 143          {
 144   1              uint8_t  keyNum;
 145   1              keyNum=Matrix_Buttons();
 146   1              return keyNum; //·µ»Ø°´¼ü
 147   1      }
 148          
 149          /*******************************************************************************
 150           * º¯ÊýÔ­ÐÍ£º
 151           * ÊäÈë²ÎÊý£º
 152           * Êä³ö²ÎÊý£º
 153           * º¯Êý¹¦ÄÜ£º
 154           * ·µ»ØÖµËµÃ÷£º
 155           * ´´½¨ÈÕÆÚ£º
 156           * ´´½¨ÈË£º
 157           * ÐÞ¸ÄÈÕÆÚ
 158           * ÐÞ¸ÄÈË£º
 159           * µÚN´ÎÐÞ¸Ä£º
 160           * ÐÞ¸ÄÔ­Òò£º
 161           * ±¸×¢£º
 162           *******************************************************************************/
 163          void KeyEventPorc(uint8_t KeyTmp) //±»µ÷ÓÃÊ±½ÓÊÕµÄÊÇGetKeyValue()µÄ·µ»ØÖµ  Ò»°ã¹Ì¶¨£¬²»¸ü¸Ä
 164          {
 165   1              gbKeyPress=0;
 166   1              if(KeyCurValue!=KeyTmp) //Õâ¸öifÓï¾äÊÇÈ¥¶¶£¬»á±»Ö´ÐÐÁ½´Î£¬µÚÈý´Î½øÀ´Ê±Ö±½ÓÌø¹ý
 167   1              {//KeyTmpÎªÁÙÊ±Öµ£¬
 168   2                      if(KeyCurValueBK!=KeyTmp)
 169   2                              KeyCurValueBK=KeyTmp;
 170   2                      else //µÚ¶þ´Î½øÀ´Ê±Ö´ÐÐÕâÒ»Ìõ
 171   2                              KeyCurValue=KeyTmp; //
 172   2                      return;
 173   2              }
 174   1              if(KeyCurValue==KeyLastValue)
 175   1              {
 176   2                      if((KeyLastValue==0) || (cntKeyLoop==0))
 177   2                              return;
 178   2                      if(--cntKeyLoop==0) //Õâ¸öÔÚµÚ¶þ´Î½øKeyEventPorc()º¯Êý£¨µÚÒ»´Î½ø¡°if(KeyCurValue==KeyLastValue)¡±Ö®Ç°£©Ê
             -±±»ÏÂÃæ¸³ÖµÎª5
 179   2                      { //cntKeyLoopÎª5¾ÍÊÇ50msÊ±¼ä
 180   3                              KeyValue=KeyLastValue; //·À¶¶Ö®ºó°ÑÈ·¶¨µÄ°´¼ü¸³Öµ¸øKeyValue
 181   3                              if(gbKeyNone==0)
 182   3                                      gbKeyPress=1;
 183   3                              switch(KeyEvent)
 184   3                              {
 185   4                                      case 0:
 186   4                                              KeyEvent=1;
 187   4                                              KeyValue |= K_D;
 188   4                                              cntKeyLoop=cKEY_HOLD;
 189   4                                              break;
 190   4                                      case 1:
 191   4                                              KeyEvent=2;
 192   4                                              KeyValue |= K_H;
 193   4                                              cntKeyLoop=cKEY_RATE_VOL;
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 6   

 194   4                                              break;
 195   4                                              case 2:
 196   4                                      case 3:
 197   4                                              KeyEvent=3;
 198   4                                              KeyValue |= K_R;
 199   4                                              cntKeyLoop=cKEY_RATE_VOL;
 200   4                                              if(cntKeylong<250)
 201   4                                                      cntKeylong++;
 202   4                                              break;
 203   4                              }
 204   3                      }
 205   2              }
 206   1              else
 207   1              {
 208   2                      if(KeyLastValue)
 209   2                      {
 210   3                              KeyValue=KeyLastValue;
 211   3                              if(gbKeyNone==0)
 212   3                                      gbKeyPress=1;
 213   3                              switch(KeyEvent)
 214   3                              {
 215   4                                      case 1:KeyValue |= K_U; break;
 216   4                                      case 2:KeyValue |= K_LU;break;
 217   4                                      case 3:KeyValue |= K_LU;break;
 218   4                              }
 219   3                              KeyEvent=0;
 220   3                      }
 221   2                      else
 222   2                      {
 223   3                              gbKeyNone=0;
 224   3                              cntKeylong=0;
 225   3                      }
 226   2                      cntKeyLoop=cKEY_CLICK;
 227   2                      KeyLastValue=KeyCurValue;
 228   2              }
 229   1      }
 230          
 231          /*******************************************************************************
 232           * º¯ÊýÔ­ÐÍ£º
 233           * ÊäÈë²ÎÊý£º
 234           * Êä³ö²ÎÊý£º
 235           * º¯Êý¹¦ÄÜ£º
 236           * ·µ»ØÖµËµÃ÷£º
 237           * ´´½¨ÈÕÆÚ£º
 238           * ´´½¨ÈË£º
 239           * ÐÞ¸ÄÈÕÆÚ
 240           * ÐÞ¸ÄÈË£º
 241           * µÚN´ÎÐÞ¸Ä£º
 242           * ÐÞ¸ÄÔ­Òò£º
 243           * ±¸×¢£º
 244           *******************************************************************************/
 245          void KeyScan(void) //±»Ö÷º¯Êýµ÷ÓÃ
 246          {
 247   1              KeyEventPorc(GetKeyValue());
 248   1      }
 249           
 250           /*******************************************************************************
 251           * º¯ÊýÔ­ÐÍ£º
 252           * ÊäÈë²ÎÊý£º
 253           * Êä³ö²ÎÊý£º
 254           * º¯Êý¹¦ÄÜ£º
 255           * ·µ»ØÖµËµÃ÷£º
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 7   

 256           * ´´½¨ÈÕÆÚ£º
 257           * ´´½¨ÈË£º
 258           * ÐÞ¸ÄÈÕÆÚ
 259           * ÐÞ¸ÄÈË£º
 260           * µÚN´ÎÐÞ¸Ä£º
 261           * ÐÞ¸ÄÔ­Òò£º
 262           * ±¸×¢£º2.¡¢³¤°´¡°TIME¡±¼ü2S£¬Ð¡Ê±×Ö·ûÉÁË¸£¬¶Ì°´¡°VOL-/PREV¡±¼ü£¬Ð¡Ê±µÝ¼õ£¬³¤°´
 263           * ¡°VOL-/PREV¡±¼ü£¬Ð¡Ê±¿ìËÙµÝ¼õ£»¶Ì°´¡°VOL+/NEXT¡±¼ü£¬Ð¡Ê±µÝÔö£¬³¤°´¡°VOL+/NEXT¡±¼ü£¬
 264           * Ð¡Ê±¿ìËÙµÝÔö¡£
 265           * 3¡¢¶Ì°´¡°TIME¡±¼ü£¬·Ö×Ö·ûÉÁË¸£¬¶Ì°´¡°VOL-/PREV¡±¼ü£¬·ÖÎ»ÊýµÝ¼õ£¬³¤°´¡°VOL-/PREV¡±¼ü£¬
 266           * ·ÖÎ»Êý¿ìËÙµÝ¼õ£»¶Ì°´¡°VOL+/NEXT¡±¼ü£¬·ÖÎ»ÊýµÝÔö£¬³¤°´¡°VOL+/NEXT¡±¼ü£¬·ÖÎ»Êý¿ìËÙµÝ
 267           * Ôö¡£
 268           * 4¡¢ÔÚ×ßÊ±Ä£Ê½ÏÂ£¬¶Ì°´¡°TIME/DIM¡±¼ü£¬µ÷ÕûÏÔÊ¾ÁÁ¶È£¬¿ÉÑ­»·µ÷Õû¸ß¡¢ÖÐ¡¢µÍÁÁ£¨Ä¬ÈÏ
 269           * Îª¸ßÁÁ£©
 270           *******************************************************************************/
 271          void KeyComMsg(void) 
 272          {
 273   1              if(gbKeyPress)
 274   1              { 
 275   2                      //Flag_data_bk=1;//Êý¾Ý¸Ä±äÊ±±¸·Ý
 276   2                      switch(KeyValue)
 277   2                      {
 278   3                              case KU(K_SNOOZE_DIMMER)://¶Ì°´
 279   3                              {//Alarm_Ring_Run
 280   4                                      //if(Alarm1_TypeDef.)
 281   4                                      break;
 282   4                              }
 283   3                              case KH(K_SNOOZE_DIMMER)://³¤°´
 284   3                              {
 285   4                                      
 286   4                                      break;
 287   4                              }
 288   3                              case KU(K_VOLINC): //¶Ì°´//ÒôÁ¿¼Ó 
 289   3                              case KR(K_VOLINC): //³¤°´//ÒôÁ¿¼Ó
 290   3                              {
 291   4                                      //³¤°´¡°VOL+/NEXT¡±¼ü£¬Ð¡Ê±¿ìËÙµÝÔö¡£
 292   4                                      //³¤°´¡°VOL+/NEXT¡±¼ü£¬·ÖÖÓÎ»Êý¿ìËÙµÝÔö¡£
 293   4                                      if ((FlagKSet_TypeDef == FLAG_KEYSET_SETTIME_HOUR) && (PlayMode_TypeDef == PLAY_IN_TIME))
 294   4                                      {
 295   5                                              if (Time_Temp_TypeDef.temp_RTC_Hour < 12)
 296   5                                              {
 297   6                                                      Time_Temp_TypeDef.temp_RTC_Hour++;
 298   6                                              }
 299   5                                      }
 300   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SETTIME_MINUTE) && (PlayMode_TypeDef == PLAY_IN_TIME))
 301   4                                      {
 302   5                                              if (Time_Temp_TypeDef.temp_RTC_Minute < 59)
 303   5                                              {
 304   6                                                      Time_Temp_TypeDef.temp_RTC_Minute++;
 305   6                                              }
 306   5                                              timeCnt_30Sec = 0;//¿ªÆôÁË²»¶¯×÷30s×Ô¶¯±£´æ£¬ÕâÀï¶¯×÷ÁË£¬ËùÒÔÖØÐÂÖÃ0
 307   5                                      }
 308   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_HOUR) && (Alarm1_TypeDef.Alarm_OnOff == ALARM_ON
             -))
 309   4                                      {
 310   5                                              if (Alarm1_TypeDef.tempHour < 12)
 311   5                                              {
 312   6                                                      Alarm1_TypeDef.tempHour++;
 313   6                                              }
 314   5                                      }
 315   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_MINUTE) && (Alarm1_TypeDef.Alarm_OnOff == ALARM_
             -ON))
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 8   

 316   4                                      {
 317   5                                              if (Alarm1_TypeDef.tempMinute < 59)
 318   5                                              {
 319   6                                                      Alarm1_TypeDef.tempMinute++;
 320   6                                              }
 321   5                                      }
 322   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_ALWORKMODE) && (Alarm1_TypeDef.Alarm_OnOff == AL
             -ARM_ON))
 323   4                                      {
 324   5                                              if (Alarm1_TypeDef.AlarmWorkMode == ALARM_BEEP)
 325   5                                              {
 326   6                                                      Alarm1_TypeDef.AlarmWorkMode = ALARM_BT;
 327   6                                              }
 328   5                                              else
 329   5                                              {
 330   6                                                      Alarm1_TypeDef.AlarmWorkMode = ALARM_BEEP;
 331   6                                              }
 332   5                                              timeCnt_30Sec = 0;//¿ªÆôÁË²»¶¯×÷30s×Ô¶¯±£´æ£¬ÕâÀï¶¯×÷ÁË£¬ËùÒÔÖØÐÂÖÃ0
 333   5                                      }
 334   4                                      else//ÔÚÀ¶ÑÀ»òTF×´Ì¬ÏÂ£¬ÒôÁ¿¹¦ÄÜ
 335   4                                      {
 336   5                                              if (sys_Volume < 15)
 337   5                                              {
 338   6                                                      sys_Volume++;
 339   6                                              }
 340   5                                      }
 341   4      
 342   4                                      break;
 343   4                              }
 344   3                              case KU(K_PLAY_PAUSE): //¶Ì°´//¶Ì°´·ÖÖÓ×Ö·ûÉÁË¸£¬
 345   3                              {                                       
 346   4                                      
 347   4                                      break;
 348   4                              }
 349   3                              case KR(K_PLAY_PAUSE): //¼ÆÊ±
 350   3                              {
 351   4                                      
 352   4                                      break;
 353   4                              }
 354   3                              case KU(K_NEXT): //¶Ì°´
 355   3                              case KR(K_NEXT): //³¤°´
 356   3                              {
 357   4                                      
 358   4                                      break;
 359   4                              }
 360   3                              case KU(K_ALARM): //¶Ì°´//ÄÖÖÓ
 361   3                              {
 362   4                                      /* ÉèÖÃRTCÊ±¼ä */
 363   4                                      if (FlagKSet_TypeDef == FLAG_KEYSET_SETTIME_HOUR)
 364   4                                      {
 365   5                                              //ÔÚ³¤°´ALARM¼üºÍSNOOZE¼ü½øÈëÉèÖÃÊ±¼äÄ£Ê½-Ð¡Ê±ÉèÖÃ£¬ÔÚ¶Ì°´ALARM¼üÉèÖÃ·ÖÖÓÊ±¼ä
 366   5                                              FlagKSet_TypeDef = FLAG_KEYSET_SETTIME_MINUTE;
 367   5                                              Time_Temp_TypeDef.Flag_Confirm_30Sec=2;//¶Ì°´ALARM¼üÈ·ÈÏÉèÖÃ»ò²»¶¯×÷30s×Ô¶¯±£´æ£¬(Îª1ÊÇÈ·
 368   5                                                                                                                         //ÈÏÄÖÖÓÉèÖÃ±êÖ¾Î»),Îª2ÊÇ30s¼ÆÊ±±êÖ¾Î»£¬
 369   5                                              timeCnt_30Sec = 0;//Ð£×¼£¬ÒÔ·ÀÒÔÇ°ÉèÖÃµÄÊ±¼ä»òÕßÆäËû¹¦ÄÜÊ¹ÓÃÊ±timeCnt_30SecÓÐ´óÓÚ0µÄÖµ
 370   5                                      }
 371   4                                      else if (FlagKSet_TypeDef == FLAG_KEYSET_SETTIME_MINUTE)
 372   4                                      {
 373   5                                              //ÔÚ³¤°´ALARM¼üºÍSNOOZE¼ü½øÈëÉèÖÃÊ±¼äÄ£Ê½-Ð¡Ê±ÉèÖÃ£¬ÔÚ¶Ì°´ALARM¼üÉèÖÃ·ÖÖÓÊ±¼ä
 374   5                                              //ÔÚ¶Ì°´ALRM¼üÈ·ÈÏÊ±¼äÉèÖÃ£¬»òÕßÔÚ½øÈë·ÖÖÓÉèÖÃÊ±¼äÖ®ºó²»¶¯×÷30s¼´×Ô¶¯±£´æ
 375   5                                              FlagKSet_TypeDef = FLAG_KEYSET_OFF;
 376   5                                              gRTC_Hour   = Time_Temp_TypeDef.temp_RTC_Hour;
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 9   

 377   5                                              gRTC_Minute = Time_Temp_TypeDef.temp_RTC_Minute;
 378   5                                              //Time_Temp_TypeDef.Flag_Confirm_30Sec = 1;//¶Ì°´ALARM¼üÈ·ÈÏÉèÖÃ»ò²»¶¯×÷30s×Ô¶¯±£´æ£¬(Îª1ÊÇÈ·
 379   5                                                                                                                               //ÈÏÄÖÖÓÉèÖÃ±êÖ¾Î»),Îª2ÊÇ30s¼ÆÊ±±êÖ¾Î»£¬
 380   5                                      }
 381   4      
 382   4                                      /* ÉèÖÃÄÖÖÓÊ±¼ä */
 383   4                                      if ((PlayMode_TypeDef == PLAY_IN_TIME) && (FlagKSet_TypeDef == FLAG_KEYSET_OFF))
 384   4                                      {
 385   5                                              //Ö»ÓÐÔÚ×ßÊ±ºÍÃ»ÓÐÆäËûÉèÖÃÄ£Ê½ÏÂ(±ÈÈçÊ±¼äÉèÖÃ£¬ÒòÎª¶Ì°´ALARMÓÐÆäËû¹¦ÄÜ)£¬²Å»á½øÈë´Ëif¹¦ÄÜ
 386   5                                              //ÉèÖÃÄÔÖÐÊ±¼ä²¢¿ªÆôÄÖÖÓ
 387   5                                              FlagKSet_TypeDef = FLAG_KEYSET_SHORT_ALARM_HOUR;
 388   5                                              Alarm1_TypeDef.Alarm_OnOff = ALARM_ON;
 389   5                                              Alarm1_TypeDef.Flag_Confirm_30Sec = 2;//µÚ¶þ´Î¿ªÆôÄÖÖÓ£¬²¢ÇÒ²»ÐÞ¸ÄÄÔÖÐÊ±¼ä£¬²»¶¯×÷30s×Ô¶¯±£
 390   5                                                                                                                        //´æ£¬(Îª1ÊÇÈ·ÈÏÄÖÖÓÉèÖÃ±êÖ¾Î»)Îª2ÊÇ30s¼ÆÊ±±êÖ¾Î»£¬
 391   5                                      }
 392   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_HOUR) && (Alarm1_TypeDef.Alarm_OnOff == ALARM_ON
             -))  
 393   4                                      {
 394   5                                              FlagKSet_TypeDef = FLAG_KEYSET_SHORT_ALARM_MINUTE;
 395   5                                              Alarm1_TypeDef.Flag_Confirm_30Sec = 0;//µÚ¶þ´Î¿ªÆôÄÖÖÓ£¬²¢ÇÒÐÞ¸ÄÄÔÖÐÊ±¼ä£¬°Ñ²»¶¯×÷×Ô¶¯±£´æ¹Ø±Õ
 396   5                                              //timeCnt_30Sec = 0;                                      //²¢Ð£×¼Ê±¼äÎª0
 397   5                                      }
 398   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_MINUTE) && (Alarm1_TypeDef.Alarm_OnOff == ALARM_
             -ON))
 399   4                                      {
 400   5                                              FlagKSet_TypeDef = FLAG_KEYSET_SHORT_ALARM_ALWORKMODE;
 401   5                                              Alarm1_TypeDef.Flag_Confirm_30Sec = 2;//¶Ì°´ALARM¼üÈ·ÈÏÉèÖÃ»ò²»¶¯×÷30s×Ô¶¯±£´æ£¬(Îª1
 402   5                                                                                                                        //ÊÇÈ·ÈÏÄÖÖÓÉèÖÃ±êÖ¾Î»)Îª2ÊÇ30s¼ÆÊ±±êÖ¾Î»£¬
 403   5                                              timeCnt_30Sec = 0;//Ð£×¼£¬ÒÔ·ÀÒÔÇ°ÉèÖÃµÄÊ±¼ä»òÕßÆäËû¹¦ÄÜÊ¹ÓÃÊ±timeCnt_30SecÓÐ´óÓÚ0µÄÖµ
 404   5                                      }
 405   4      
 406   4                                      break;
 407   4                              }
 408   3                              case KH(K_ALARM): //³¤°´//ÄÖÖÓ
 409   3                              {
 410   4                                      
 411   4                                      break;
 412   4                              }
 413   3                              case KU(K_VOLDEC): //¶Ì°´//ÒôÁ¿¼õ
 414   3                              case KR(K_VOLDEC): //³¤°´//ÒôÁ¿¼õ
 415   3                              {
 416   4                                      //³¤°´¡°VOL-/PREV¡±¼ü£¬Ð¡Ê±¿ìËÙµÝ¼õ£»
 417   4                                      //³¤°´¡°VOL-/PREV¡±¼ü£¬·ÖÖÓÎ»Êý¿ìËÙµÝ¼õ£»
 418   4                                      if ((FlagKSet_TypeDef == FLAG_KEYSET_SETTIME_HOUR) && (PlayMode_TypeDef == PLAY_IN_TIME))
 419   4                                      {
 420   5                                              if (Time_Temp_TypeDef.temp_RTC_Hour > 0)
 421   5                                              {
 422   6                                                      Time_Temp_TypeDef.temp_RTC_Hour--;
 423   6                                              }
 424   5                                      }
 425   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SETTIME_MINUTE) && (PlayMode_TypeDef == PLAY_IN_TIME))
 426   4                                      {
 427   5                                              if (Time_Temp_TypeDef.temp_RTC_Minute > 0)
 428   5                                              {
 429   6                                                      Time_Temp_TypeDef.temp_RTC_Minute--;
 430   6                                              }
 431   5                                              timeCnt_30Sec = 0;//¿ªÆôÁË²»¶¯×÷30s×Ô¶¯±£´æ£¬ÕâÀï¶¯×÷ÁË£¬ËùÒÔÖØÐÂÖÃ0
 432   5                                      }
 433   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_HOUR) && (Alarm1_TypeDef.Alarm_OnOff == ALARM_ON
             -))
 434   4                                      {
 435   5                                              if (Alarm1_TypeDef.tempHour > 0)
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 10  

 436   5                                              {
 437   6                                                      Alarm1_TypeDef.tempHour--;
 438   6                                              }
 439   5                                      }
 440   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_MINUTE) && (Alarm1_TypeDef.Alarm_OnOff == ALARM_
             -ON))
 441   4                                      {
 442   5                                              if (Alarm1_TypeDef.tempMinute > 0)
 443   5                                              {
 444   6                                                      Alarm1_TypeDef.tempMinute--;
 445   6                                              }
 446   5                                      }
 447   4                                      else if ((FlagKSet_TypeDef == FLAG_KEYSET_SHORT_ALARM_ALWORKMODE) && (Alarm1_TypeDef.Alarm_OnOff == AL
             -ARM_ON))
 448   4                                      {
 449   5                                              if (Alarm1_TypeDef.AlarmWorkMode == ALARM_BEEP)
 450   5                                              {
 451   6                                                      Alarm1_TypeDef.AlarmWorkMode = ALARM_BT;
 452   6                                              }
 453   5                                              else
 454   5                                              {
 455   6                                                      Alarm1_TypeDef.AlarmWorkMode = ALARM_BEEP;
 456   6                                              }
 457   5                                              timeCnt_30Sec = 0;//¿ªÆôÁË²»¶¯×÷30s×Ô¶¯±£´æ£¬ÕâÀï¶¯×÷ÁË£¬ËùÒÔÖØÐÂÖÃ0
 458   5                                      }
 459   4                                      else//ÔÚÀ¶ÑÀ»òTF×´Ì¬ÏÂ£¬ÒôÁ¿¹¦ÄÜ
 460   4                                      {
 461   5                                              if (sys_Volume > 0)
 462   5                                              {
 463   6                                                      sys_Volume--;
 464   6                                              }
 465   5                                      }
 466   4      
 467   4                                      break;
 468   4                              }
 469   3                              case KU(K_BT): //¶Ì°´
 470   3                              {
 471   4                                      //¶Ì°´¡°VOL-/PREV¡±¼ü£¬Ð¡Ê±µÝ¼õ£¬
 472   4                                      //¶Ì°´¡°VOL-/PREV¡±¼ü£¬·ÖÖÓÎ»ÊýµÝ¼õ£¬
 473   4                                      if (PlayMode_TypeDef != PLAY_IN_TIME_BT)
 474   4                                      {
 475   5                                              PlayMode_TypeDef = PLAY_IN_TIME_BT;
 476   5                                      }
 477   4                                      break;
 478   4                              }
 479   3                              case KH(K_BT): //³¤°´
 480   3                              {
 481   4                                      //³¤°´¡°VOL-/PREV¡±¼ü£¬Ð¡Ê±¿ìËÙµÝ¼õ£»
 482   4                                      //³¤°´¡°VOL-/PREV¡±¼ü£¬·ÖÖÓÎ»Êý¿ìËÙµÝ¼õ£»
 483   4                                      break;
 484   4                              }
 485   3                              case KU(K_PREV): //¶Ì°´
 486   3                              case KR(K_PREV): //³¤°´
 487   3                              {
 488   4                                      
 489   4                                      break;
 490   4                              }
 491   3                              case KU(K_AL_SNOOZE): //¶Ì°´
 492   3                              {
 493   4      
 494   4                                      break;
 495   4                              }
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 11  

 496   3                              case KR(K_AL_SNOOZE): //³¤°´
 497   3                              {
 498   4                                      if (PlayMode_TypeDef == PLAY_IN_TIME)
 499   4                                      {
 500   5                                              if (cntKeylong == 10)//2s
 501   5                                              {
 502   6                                                      //³¤°´ALARMºÍSNOOZE¼ü2s½øÈëÊ±¼äÉèÖÃÄ£Ê½-Ð¡ÊÂÉèÖÃ
 503   6                                                      FlagKSet_TypeDef = FLAG_KEYSET_SETTIME_HOUR;
 504   6                                              }
 505   5                                      }
 506   4                                      break;
 507   4                              }
 508   3                              case KU(K_AL_VOLINC): //¶Ì°´
 509   3                              case KR(K_AL_VOLINC): //³¤°´
 510   3                              {
 511   4                                      if (PlayMode_TypeDef == PLAY_IN_TIME)
 512   4                                      {
 513   5                                              if (cntKeylong == 10)//2s
 514   5                                                      gRTC_Hour = gRTC_Hour + 1;//×éºÏ¼ü-ÄÖÖÓºÍÒôÁ¿¼Ó-Í¬Ê±2s-RTCÊ±¼ä¼ÓÒ»Ð¡Ê±£¬±íÊ¾¿ªÆôÏÄÁîÊ±
 515   5                                      }
 516   4                                      break;
 517   4                              }
 518   3                              case KU(K_AL_VOLDEC): //¶Ì°´
 519   3                              case KR(K_AL_VOLDEC): //³¤°´
 520   3                              {
 521   4                                      if (PlayMode_TypeDef == PLAY_IN_TIME)
 522   4                                      {
 523   5                                              if (cntKeylong == 10)//2s
 524   5                                                      gRTC_Hour = gRTC_Hour - 1;//×éºÏ¼ü-ÄÖÖÓºÍÒôÁ¿¼õ-Í¬Ê±2s-RTCÊ±¼ä¼õÒ»Ð¡Ê±£¬±íÊ¾¹Ø±ÕÏÄÁîÊ±
 525   5                                      }
 526   4                                      break;
 527   4                              }
 528   3                      }
 529   2              }
 530   1      }
 531          
 532          
 533          
 534          
 535           
 536           /*******************************************************************************
 537           * º¯ÊýÔ­ÐÍ£º
 538           * ÊäÈë²ÎÊý£º
 539           * Êä³ö²ÎÊý£º
 540           * º¯Êý¹¦ÄÜ£º
 541           * ·µ»ØÖµËµÃ÷£º
 542           * ´´½¨ÈÕÆÚ£º
 543           * ´´½¨ÈË£º
 544           * ÐÞ¸ÄÈÕÆÚ
 545           * ÐÞ¸ÄÈË£º
 546           * µÚN´ÎÐÞ¸Ä£º
 547           * ÐÞ¸ÄÔ­Òò£º
 548           * ±¸×¢£º
 549           *******************************************************************************/
 550           
 551           
 552           /*******************************************************************************
 553           * º¯ÊýÔ­ÐÍ£º
 554           * ÊäÈë²ÎÊý£º
 555           * Êä³ö²ÎÊý£º
 556           * º¯Êý¹¦ÄÜ£º
 557           * ·µ»ØÖµËµÃ÷£º
C51 COMPILER V9.00   KEY_MODE                                                              11/09/2018 13:59:18 PAGE 12  

 558           * ´´½¨ÈÕÆÚ£º
 559           * ´´½¨ÈË£º
 560           * ÐÞ¸ÄÈÕÆÚ
 561           * ÐÞ¸ÄÈË£º
 562           * µÚN´ÎÐÞ¸Ä£º
 563           * ÐÞ¸ÄÔ­Òò£º
 564           * ±¸×¢£º
 565           *******************************************************************************/
 566          
 567          
 568          
 569          
 570          
 571          
 572          
 573          
 574          
 575          
 576          
 577          
 578          
 579          
 580          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    724    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     14    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  54 WARNING(S),  0 ERROR(S)
