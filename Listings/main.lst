C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\ProgramFiles\Keil_v5\C51\BIN\C51.EXE Device\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Device;.\Ap
                    -p_User\Include) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          //======================================================
   2          // Main program routine
   3          // - Device name  : MC96F6508A
   4          // - Package type : 52LQFP
   5          //======================================================
   6          // For XDATA variable : V1.041.00 ~
   7          #define         MAIN    1
   8          
   9          // Generated    : Mon, Nov 05, 2018 (15:44:40)
  10          #include        "MC96F6508A.h"
  11          #include        "func_def.h"
*** ERROR C132 IN LINE 13 OF DEVICE\FUNC_DEF.H: '_UART_write': not in formal parameter list
*** ERROR C132 IN LINE 14 OF DEVICE\FUNC_DEF.H: 'UART_read': not in formal parameter list
*** ERROR C132 IN LINE 15 OF DEVICE\FUNC_DEF.H: 'WDT_init': not in formal parameter list
*** ERROR C132 IN LINE 16 OF DEVICE\FUNC_DEF.H: 'WDT_clear': not in formal parameter list
*** ERROR C132 IN LINE 17 OF DEVICE\FUNC_DEF.H: 'WT_init': not in formal parameter list
  12          #include    "app_main.h"
*** ERROR C127 IN LINE 14 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'BOOL': invalid storage class
*** ERROR C127 IN LINE 15 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'uchar': invalid storage class
*** ERROR C127 IN LINE 16 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'BYTE': invalid storage class
*** ERROR C127 IN LINE 17 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'WORD': invalid storage class
*** ERROR C127 IN LINE 18 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 's8': invalid storage class
*** ERROR C127 IN LINE 19 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 's16': invalid storage class
*** ERROR C127 IN LINE 20 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 's32': invalid storage class
*** ERROR C127 IN LINE 21 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'u8': invalid storage class
*** ERROR C127 IN LINE 22 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'u16': invalid storage class
*** ERROR C127 IN LINE 23 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'u32': invalid storage class
*** ERROR C127 IN LINE 24 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'uint8_t': invalid storage class
*** ERROR C127 IN LINE 25 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'uint16_t': invalid storage class
*** ERROR C127 IN LINE 26 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\USER
             -_DEFINE.H: 'uint32_t': invalid storage class
*** ERROR C132 IN LINE 5 OF DEVICE\FUNC_DEF.H: 'port_init': not in formal parameter list
*** ERROR C132 IN LINE 6 OF DEVICE\FUNC_DEF.H: 'clock_init': not in formal parameter list
*** ERROR C132 IN LINE 7 OF DEVICE\FUNC_DEF.H: 'KeyINT_init': not in formal parameter list
*** ERROR C132 IN LINE 8 OF DEVICE\FUNC_DEF.H: 'LCD_init': not in formal parameter list
*** ERROR C132 IN LINE 9 OF DEVICE\FUNC_DEF.H: 'Timer0_init': not in formal parameter list
*** ERROR C132 IN LINE 10 OF DEVICE\FUNC_DEF.H: 'Timer3_init': not in formal parameter list
*** ERROR C132 IN LINE 11 OF DEVICE\FUNC_DEF.H: 'UART_init': not in formal parameter list
*** ERROR C132 IN LINE 13 OF DEVICE\FUNC_DEF.H: 'UART_Def_Init': not in formal parameter list
*** ERROR C141 IN LINE 13 OF DEVICE\FUNC_DEF.H: syntax error near 'void'
*** ERROR C132 IN LINE 13 OF DEVICE\FUNC_DEF.H: '_UART_write': not in formal parameter list
*** ERROR C132 IN LINE 14 OF DEVICE\FUNC_DEF.H: 'UART_read': not in formal parameter list
C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 2   

*** ERROR C132 IN LINE 15 OF DEVICE\FUNC_DEF.H: 'WDT_init': not in formal parameter list
*** ERROR C132 IN LINE 16 OF DEVICE\FUNC_DEF.H: 'WDT_clear': not in formal parameter list
*** ERROR C132 IN LINE 17 OF DEVICE\FUNC_DEF.H: 'WT_init': not in formal parameter list
*** WARNING C329 IN LINE 16 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 17 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 20 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 21 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 24 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 25 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 28 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 29 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 32 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 33 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 36 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 37 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 40 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 41 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 44 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 45 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 48 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 49 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 52 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 53 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 56 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 57 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 60 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 61 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 64 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 65 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 68 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 69 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 72 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 73 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 3   

             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 76 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 77 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 80 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 81 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 84 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 85 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 88 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 89 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 92 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 93 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 96 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 97 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LE
             -D_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 100 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 101 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 104 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 105 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 108 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 109 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 112 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 113 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 116 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 117 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 120 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** WARNING C329 IN LINE 121 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\L
             -ED_MODE.H: single-line comment contains line-continuation
*** ERROR C127 IN LINE 272 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
             -_MODE.H: 'LED_BRIGHTNESS_TypeDef': invalid storage class
*** ERROR C127 IN LINE 279 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
             -_MODE.H: 'ALARM_WORK_MODE_TypeDef': invalid storage class
*** ERROR C127 IN LINE 285 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
             -_MODE.H: 'ALARM_ONOFF_TypeDef': invalid storage class
*** ERROR C127 IN LINE 291 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
             -_MODE.H: 'ALARM_SNOOZE_TypeDef': invalid storage class
*** ERROR C127 IN LINE 297 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
             -_MODE.H: 'ALARM_RING_TIMER_TypeDef': invalid storage class
*** ERROR C127 IN LINE 303 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
             -_MODE.H: 'ALARM_RING_RUN_TypeDef': invalid storage class
*** ERROR C141 IN LINE 308 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 4   

             -_MODE.H: syntax error near 'ALARM_ONOFF_TypeDef'
*** ERROR C129 IN LINE 308 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED
             -_MODE.H: missing ';' before 'Alarm_OnOff'
  13          
  14          void main()
  15          {
  16                  cli();                  // disable INT. during peripheral setting
  17                  port_init();            // initialize ports
  18                  clock_init();           // initialize operation clock
  19                  KeyINT_init();          // initialize KEY interrupt
  20                  LCD_init();             // initialize LCD
  21                  Timer0_init();          // initialize Timer0
  22                  Timer3_init();          // initialize Timer3
  23                  UART_init();            // initialize UART interface
  24                  WDT_init();             // initialize Watch-dog timer
  25                  WT_init();              // initialize Watch timer
  26                  sei();                  // enable INT.
  27                  
  28                  // TODO: add your main code here
  29                  app_main();
  30                  while(1);
  31          }
  32          
  33          //======================================================
  34          // interrupt routines
  35          //======================================================
  36          
  37          void INT_UART_Rx() interrupt 9
  38          {
  39                  // UART Rx interrupt
  40                  // TODO: add your code here
  41          }
  42          
  43          void INT_UART_Tx() interrupt 10
  44          {
  45                  // UART Tx interrupt
  46                  // TODO: add your code here
  47          }
  48          
  49          void INT_Timer0() interrupt 13
  50          {
  51                  // Timer0 interrupt
  52                  // TODO: add your code here
  53                  Sys_Tick();
  54          }
  55          
  56          void INT_WT() interrupt 20
  57          {
  58                  // Watch timer interrupt
  59                  // TODO: add your code here
  60                  //这里变量gbHalfSecong的意思为半秒，是因为这个函数中断一次为0.5秒，
  61                  gbHalfSecong=(!gbHalfSecong);
  62                  if(gbHalfSecong)
  63                  {
  64                          if(++gRTC_Sec>59)
  65                          {
  66                                  gRTC_Sec=0;
  67                                  if(++gRTC_Minute>59)
  68                                  {
  69                                          gRTC_Minute=0;
  70                                          if(++gRTC_Hour>23)
  71                                          {
C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 5   

  72                                                  gRTC_Hour=0;
  73                                                  gRTC_Week<<=1;
  74                                                  if(gRTC_Week==0x80)//如果移位之后等于0x80，说明是第8次移位，这时候就是
  75                                                          gRTC_Week=0x01;//周一，所以赋值为0x01。
  76                                          }
  77                                  }
  78                          }
  79                  }
  80          }
  81          
  82          //======================================================
  83          // peripheral setting routines
  84          //======================================================
  85          
  86          unsigned char UART_read()
  87          {
  88                  unsigned char dat;
  89                  
  90                  while(!(UARTST & 0x20));        // wait
  91                  dat = UARTDR;           // read
  92                  return  dat;
  93          }
  94          
  95          void KeyINT_init()
  96          {
  97                  // initialize KEY interrupt
  98                  KPOL1 = 0x05;           // edge : KEY INT.7~4
  99                  KPOL0 = 0x55;           // edge : KEY INT.3~0
 100          }
 101          
 102          void LCD_init()
 103          {
 104                  // initialize LCD
 105                  // Frame freq. = 16.000000Hz
 106                  LCDCRH = 0x00;          // LCD control High
 107                  LCDCRL = 0x00;          // LCD control Low
 108                  LCDCCR = 0x00;          // LCD Contrast control
 109          }
 110          
 111          void Timer0_init()
 112          {
 113                  // initialize Timer0
 114                  // 8bit timer, period = 1.008000mS
 115                  T0CR = 0x92;            // timer setting
 116                  T0DR = 0x7D;            // period count
 117                  IE2 |= 0x02;            // Enable Timer0 interrupt
 118                  T0CR |= 0x01;           // clear counter
 119          }
 120          
 121          void Timer3_init()
 122          {
 123                  // initialize Timer3
 124                  // 8bit timer, period = 0.050000mS
 125                  T3DR = 0x18;            // period count
 126                  T3CR = 0x8A;            // timer setting
 127                  T3CR |= 0x01;           // clear counter
 128          }
 129          
 130          bit  enUart = 0;
 131          void UART_init()
 132          {
 133                  // initialize UART interface
C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 6   

 134                  // UART : 9615bps N 8 1
 135                  if (!enUart)
 136                  {
 137                          UARTCR2  = 0x02;        // activate UART
 138                          UARTCR1  = 0x06;        // bit count, parity
 139                          UARTCR2 |= 0xEC;        // interrupt, speed
 140                          UARTCR3  = 0x00;        // stop bit
 141                          UARTBD   = 0x67;        // baud rate
 142                          IE1     |= 0x18;    // enable UART interrupt
 143                  }
 144                  enUart = 1;
 145          }
 146          
 147          void UART_Def_Init()
 148          {
 149                  // initialize UART interface
 150                  // UART : 9615bps N 8 1
 151                  if (enUart)
 152                  {
 153                          UARTCR2  = 0x00;        // activate UART
 154                          UARTCR1  = 0x00;        // bit count, parity
 155                          UARTCR2 |= 0x00;        // interrupt, speed
 156                          UARTCR3  = 0x00;        // stop bit
 157                          UARTBD   = 0x00;        // baud rate
 158                          IE1     &= (~0x18); // enable UART interrupt
 159                  }
 160                  enUart = 0;
 161          }
 162          
 163          void UART_write(unsigned char dat)
 164          {
 165                  while(!(UARTST & 0x80));        // wait
 166                  UARTDR = dat;           // write
 167          }
 168          
 169          void WDT_clear()
 170          {
 171                  WDTCR |= 0x20;          // Clear Watch-dog timer
 172          }
 173          
 174          void WDT_init()
 175          {
 176                  // initialize Watch-dog timer
 177                  WDTDR = 0x01;           // period
 178                  WDTCR = 0xC0;           // setting
 179                  //WDTCR |= 0x02;        // Use WDTRC
 180                  WDT_clear();
 181          }
 182          
 183          void WT_init()
 184          {
 185                  // initialize Watch timer
 186                  WTCR = 0x88;            // setting
 187                  WTDR = 0x01;            // set duty
 188                  WTDR = 0x81;            // clear WT
 189                  IE3 |= 0x04;            // Enable WT interrupt
 190          }
 191          
 192          void clock_init()
 193          {
 194                  // internal RC clock (16.000000MHz)
 195                  OSCCR = 0x28;           // Set Int. OSC
C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 7   

 196                  SCCR = 0x00;            // Use Int. OSC
 197          }
 198          
 199          void port_init()
 200          {
 201                  // initialize ports
 202                  //   1 : P13      in  
 203                  //   2 : P14      out 
 204                  //   3 : P15      out 
 205                  //   8 : P60      out 
 206                  //   9 : P61      out 
 207                  //  11 : SXIN     out 
 208                  //  12 : SXOUT    out 
 209                  //  14 : P20      out 
 210                  //  15 : P21      out 
 211                  //  16 : P22      out 
 212                  //  17 : P23      out 
 213                  //  18 : P24      out 
 214                  //  19 : P25      out 
 215                  //  20 : P26      out 
 216                  //  21 : P27      out 
 217                  //  22 : P30      out 
 218                  //  23 : P31      out 
 219                  //  24 : P32      out 
 220                  //  25 : P33      out 
 221                  //  26 : P34      out 
 222                  //  27 : P35      out 
 223                  //  28 : P36      out 
 224                  //  29 : P37      out 
 225                  //  30 : P40      out 
 226                  //  31 : P41      out 
 227                  //  32 : P42      out 
 228                  //  33 : P43      out 
 229                  //  34 : P44      out 
 230                  //  35 : P45      out 
 231                  //  36 : P46      out 
 232                  //  37 : P47      out 
 233                  //  38 : P50      out 
 234                  //  39 : P51      out 
 235                  //  40 : P52      out 
 236                  //  41 : P53      out BT_RED_OUTPUT
 237                  //  42 : P54      out BT_RED_OUTPUT
 238                  //  43 : P55      out BT_BLUE_INPUT
 239                  //  44 : TXD      out 
 240                  //  45 : RXD      in  
 241                  //  46 : P00      in  
 242                  //  47 : P01      out 
 243                  //  48 : P02      out 
 244                  //  49 : P03      out BT_RED_INPUT
 245                  //  50 : P10      in  
 246                  //  51 : P11      in  
 247                  //  52 : P12      in  
 248                  P0IO = 0xFE;            // direction
 249                  P0PU = 0x00;            // pullup
 250                  P0OD = 0x00;            // open drain
 251                  P0DB = 0x00;            // bit7~6(debounce clock), bit1~0=P01~00 debounce
 252                  P0   = 0x00;            // port initial value
 253          
 254                  P1IO = 0xF0;            // direction
 255                  P1PU = 0x3F;            // pullup
 256                  P1OD = 0x00;            // open drain
 257                  P1DB = 0x00;            // P17~10 debounce
C51 COMPILER V9.00   MAIN                                                                  11/12/2018 10:19:33 PAGE 8   

 258                  P1   = 0x00;            // port initial value
 259          
 260                  P2IO = 0xFF;            // direction
 261                  P2PU = 0xFF;            // pullup
 262                  P2OD = 0x00;            // open drain
 263                  P2   = 0x00;            // port initial value
 264          
 265                  P3IO = 0xFF;            // direction
 266                  P3PU = 0xFF;            // pullup
 267                  P3OD = 0x00;            // open drain
 268                  P3   = 0x00;            // port initial value
 269          
 270                  P4IO = 0xFF;            // direction
 271                  P4PU = 0xFF;            // pullup
 272                  P4OD = 0x00;            // open drain
 273                  P4   = 0x00;            // port initial value
 274          
 275                  P5IO = 0x7F;            // direction
 276                  P5PU = 0x00;            // pullup
 277                  P5OD = 0x00;            // open drain
 278                  P5   = 0x00;            // port initial value
 279          
 280                  P6IO = 0xFF;            // direction
 281                  P6PU = 0x01;            // pullup
 282                  P6OD = 0x00;            // open drain
 283                  P6   = 0x00;            // port initial value
 284          
 285                  // Set port functions
 286                  P0FSR = 0x00;           // P0 selection
 287                  P2FSR = 0x00;           // P2 selection
 288                  P3FSR = 0x00;           // P3 selection
 289                  P4FSR = 0x00;           // P4 selection
 290                  P5FSRH = 0x18;          // P5 selection High
 291                  P5FSRL = 0x00;          // P5 selection Low
 292                  P6FSR = 0x0C;           // P6 selection
 293          }
 294          

C51 COMPILATION COMPLETE.  54 WARNING(S),  40 ERROR(S)
