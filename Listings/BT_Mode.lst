C51 COMPILER V9.00   BT_MODE                                                               11/07/2018 14:17:32 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE BT_MODE
OBJECT MODULE PLACED IN .\Objects\BT_Mode.obj
COMPILER INVOKED BY: D:\ProgramFiles\Keil_v5\C51\BIN\C51.EXE App_User\Source\BT_Mode.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.
                    -\Device;.\App_User\Include) DEBUG OBJECTEXTEND PRINT(.\Listings\BT_Mode.lst) OBJECT(.\Objects\BT_Mode.obj)

line level    source

   1          /*******************/
   2          /*头文件header file*/
   3          /*******************/
   4          #include "app_main.h"
*** ERROR C129 IN LINE 10 OF \HOMEWORK\KEIL5\PROJECT\PROJECT.COMPANY\7、GP-095\GP-095_BT-LED_ALARM\APP_USER\INCLUDE\LED_
             -MODE.H: missing ';' before '|='
   5          
   6          /************************/
   7          /*宏定义macro definition*/
   8          /************************/
   9          
  10          /*************************/
  11          /*类型定义byte definition*/
  12          /*************************/
  13          BT_STEP  BT_Step;
  14          
  15          /****************************/
  16          /*标志位定义flags definetion*/
  17          /****************************/
  18          bit Flag_BT_work;
  19          bit Flag_BT_Connect;//蓝牙连接标志位
  20          bit Flag_BT_Play;   //蓝牙播放
  21          bit Flag_BT_Pause;  //暂停
  22          bit Flag_UART1_RX_Finish_A;
  23          bit Flag_UART1_RX_Finish_B;
  24          bit Flag_UART_ReceiveBuffer_A_B;
  25          
  26          /*****************************/
  27          /*变量定义variable definition*/
  28          /*****************************/
  29          uint8_t  idata bt_cmd;
  30          uint8_t  idata cntMuteBT;
  31          uint8_t  idata btVolume;
  32          uint8_t  idata uart1_RX_Pointer;
  33          uint8_t  idata uart1_TX_Pointer;
  34          uint8_t  idata uart1_EnableSend;
  35          uint8_t  idata uart1_TX_Timeout;
  36          uint8_t  idata uart1_RX_Timeout;
  37          
  38          /**************************/
  39          /*数组定义array definition*/
  40          /**************************/
  41          uint8_t  xdata uart1_TransmitBuffer[UART1_LEN_BUFFER];
  42          uint8_t  xdata uart1_ReceiveBuffer_A[UART1_LEN_BUFFER];
  43          uint8_t  xdata uart1_ReceiveBuffer_B[UART1_LEN_BUFFER];
  44          char  code BT_Command_Tab[][8]= //用于改变歌曲时发送给wifi的第几首歌
  45          {
  46                  "     \r\n",//NONE
  47                  "AT+MT\r\n",//BT_PAUSE
  48                  "AT+MA\r\n",//BT_PALY
  49                  "AT+ME\r\n",//BT_PREV
  50                  "AT+MD\r\n",//BT_NEXT
  51                  "AT+CA\r\n",//BT_PARIR
  52                  "AT+CB\r\n",//BT_PARIR_EXT
C51 COMPILER V9.00   BT_MODE                                                               11/07/2018 14:17:32 PAGE 2   

  53                  "AT+CC\r\n",//BT_LINK_BACK
  54                  "AT+CP\r\n",//BT_POWER_DOWN
  55                  "AT+CD\r\n",//BT_DISCONN
  56                  "AT+CZ\r\n",//BT_CLEAR_LIST
  57                  "AT+H0\r\n",
  58                  "AT+H1\r\n",
  59                  "AT+H2\r\n",
  60                  "AT+H3\r\n",
  61                  "AT+H4\r\n",
  62                  "AT+H5\r\n",
  63                  "AT+H6\r\n",
  64                  "AT+H7\r\n",
  65                  "AT+H8\r\n",
  66                  "AT+H9\r\n",
  67                  "AT+HA\r\n",
  68                  "AT+HB\r\n",
  69                  "AT+HC\r\n",
  70                  "AT+HD\r\n",    
  71                  "AT+HE\r\n",
  72                  "AT+HF\r\n",    
  73          };
  74          /******************************/
  75          /*函数声明Function declaration*/
  76          /******************************/
  77          
  78          /*****************************/
  79          /*函数定义function definetion*/
  80          /*****************************/
  81          /*******************************************************************************
  82           * 函数原型：
  83           * 输入参数：
  84           * 输出参数：
  85           * 函数功能：串口发送字符
  86           * 返回值说明：
  87           * 创建日期：
  88           * 创建人：
  89           * 修改日期
  90           * 修改人：
  91           * 第N次修改：
  92           * 修改原因：
  93           * 备注：
  94           *******************************************************************************/
  95           void Uart1Transmit_SendString(char *str)
  96           {
  97                   uint8_t  i;
  98                   while(uart1_EnableSend);
  99                   for(i=0;i<UART1_LEN_BUFFER;i++)
 100                   {
 101                          uart1_TransmitBuffer[i]=0;
 102                   }
 103                   for(i=0;*str!='\0';i++)
 104                   {
 105                           uart1_TransmitBuffer[i]=*str;
 106                           str++;
 107                   }
 108                   uart1_TX_Pointer=0;
 109                   uart1_EnableSend=1;
 110                   UARTDR=uart1_TransmitBuffer[uart1_TX_Pointer++];
 111           }
 112           
 113           
 114           /*******************************************************************************
C51 COMPILER V9.00   BT_MODE                                                               11/07/2018 14:17:32 PAGE 3   

 115           * 函数原型：
 116           * 输入参数：
 117           * 输出参数：
 118           * 函数功能：发送命令，通过传进来的数据判断选择哪个命令发送
 119           * 返回值说明：
 120           * 创建日期：
 121           * 创建人：
 122           * 修改日期
 123           * 修改人：
 124           * 第N次修改：
 125           * 修改原因：
 126           * 备注：
 127           *******************************************************************************/
 128          void BT_Send_CMD(uint8_t cmd)
 129          {
 130                  uint8_t  code bt_VOL_Send_Tab[]={0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15};
 131                  if(cmd<BT_VOL)
 132                          Uart1Transmit_SendString(&BT_Command_Tab[cmd][0]);
 133                  else
 134                          Uart1Transmit_SendString(&BT_Command_Tab[BT_VOL+bt_VOL_Send_Tab[sys_volume]][0]);
 135          }
 136           
 137           /*******************************************************************************
 138           * 函数原型：
 139           * 输入参数：
 140           * 输出参数：
 141           * 函数功能：
 142           * 返回值说明：
 143           * 创建日期：
 144           * 创建人：
 145           * 修改日期
 146           * 修改人：
 147           * 第N次修改：
 148           * 修改原因：
 149           * 备注：
 150           *******************************************************************************/
 151          void BlueMode_Receive(void)
 152          {
 153                  uint8_t  i;
 154                  char *BT_CMD;
 155                  if((Flag_UART1_RX_Finish_A) || (Flag_UART1_RX_Finish_B))
 156                  {
 157                          if(Flag_UART1_RX_Finish_A)
 158                          {
 159                                  Flag_UART1_RX_Finish_A=0;
 160                                  BT_CMD=uart1_ReceiveBuffer_A;
 161                          }
 162                          else 
 163                          {
 164                                  Flag_UART1_RX_Finish_B=0;
 165                                  BT_CMD=uart1_ReceiveBuffer_B;
 166                          }
 167                          if(BT_CMD[0])
 168                          {
 169                          
 170                          }
 171                          
 172                          for(i=0;i<UART1_LEN_BUFFER;i++)
 173                                  BT_CMD[i]=0;
 174                  }
 175          }
 176           
C51 COMPILER V9.00   BT_MODE                                                               11/07/2018 14:17:32 PAGE 4   

 177           /*******************************************************************************
 178           * 函数原型：
 179           * 输入参数：
 180           * 输出参数：
 181           * 函数功能：
 182           * 返回值说明：
 183           * 创建日期：
 184           * 创建人：
 185           * 修改日期
 186           * 修改人：
 187           * 第N次修改：
 188           * 修改原因：
 189           * 备注：
 190           *******************************************************************************/
 191          void BlueMode_Handle(void) //接收到的数据信息/状态进行处理
 192          {
 193                  BlueMode_Receive();
 194                  if
 195          }
 196           
 197           /*******************************************************************************
 198           * 函数原型：
 199           * 输入参数：
 200           * 输出参数：
 201           * 函数功能：
 202           * 返回值说明：
 203           * 创建日期：
 204           * 创建人：
 205           * 修改日期
 206           * 修改人：
 207           * 第N次修改：
 208           * 修改原因：
 209           * 备注：
 210           *******************************************************************************/
 211          
 212          
 213          
 214          
 215          
 216          

C51 COMPILATION COMPLETE.  0 WARNING(S),  1 ERROR(S)
